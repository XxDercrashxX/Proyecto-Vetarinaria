<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Detalle de Dueño - VETEICA CLINIC</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.2/css/all.min.css">
    <link rel="stylesheet" href="../public/css/styles.css"> 
    <script src="https://cdnjs.cloudflare.com/ajax/libs/html2pdf.js/0.10.1/html2pdf.bundle.min.js"></script>
</head>
<body>

    <header class="main-header">
        <nav class="main-nav">
            <a href="inicio.html" class="nav-logo">
                <img src="../public/css/img/logoVetica.png" alt="Veteica Clinic Logo">
            </a>
            <ul class="nav-links">
                <li><a href="inicio.html">INICIO</a></li>
                <li><a href="paciente.html">PACIENTE</a></li>
                <li><a href="duenos.html" class="link-active">DUEÑOS</a></li>
                <li><a href="citas.html">CITAS</a></li>
            </ul>
            <div class="nav-profile"><span>N</span></div>
            
            <div class="profile">
                <h3>Perfil del administrador</h3>
                <div class="profile-header">
                    <div class="profile-avatar"><span>N</span></div>
                    <strong>ejemplo</strong>
                    <p>ejemplo@gmail.com</p>
                </div>
                <div class="profile-body">
                    <label>Credencial:</label><div class="info-box">9494165149840401</div>
                    <label>Certificado:</label><div class="info-box">Veteterinario</div>
                    <label>Telefono:</label><div class="info-box">612 111 1111</div>
                </div>
                <div class="profile-footer"><a href="index.html">Cerrar sesión</a></div>
            </div>
        </nav>
    </header>

    <main class="container">

        <div class="details-container">
            
            <div id="contenido-pdf">
                <h2 class="page-title" style="margin-top: 0;">Detalle de Dueño</h2>

                <div class="owner-header-section">

                    <div class="owner-photo-container">
                        <img src="https://randomuser.me/api/portraits/men/32.jpg" alt="Foto del Dueño" class="owner-photo" style="display: block; margin: 0 auto;">
                    </div>

                    <div class="owner-info-data">
                        <h2 id="owner-name" style="text-align: left; margin: 0;">Jose herrera</h2>
                        <p id="owner-phone"><strong>612-123-4567</strong></p>
                        <p id="owner-address">Colonia Púrpura, calle 123</p>
                    </div>

                    <div class="owner-email-container">
                        <p id="owner-email">jose@gmail.com</p>
                    </div>
                </div>

                <hr class="section-divider">

                <h3 class="section-subtitle">Mascotas asociadas:</h3>
                <table class="details-table">
                    <thead>
                        <tr>
                            <th>Nombre</th>
                            <th>Especie</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr>
                            <td>Lilo</td>
                            <td>Perro</td>
                        </tr>
                    </tbody>
                </table>

                <h3 class="section-subtitle" style="margin-top: 3rem;">Historial de citas</h3>
                <table class="history-table">
                    <thead>
                        <tr>
                            <th>Consultas</th>
                            <th>Fechas</th>
                            <th>Diagnósticos</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr><td>1</td><td>22/10/2025</td><td>Ligero Problema en oido.</td></tr>
                        <tr><td>2</td><td>23/10/2025</td><td>Aun con ligero problema en oido.</td></tr>
                        <tr><td>3</td><td>24/10/2025</td><td>Infección de oido.</td></tr>
                    </tbody>
                </table>
            </div>

            <div class="pdf-buttons" style="margin-top: 3rem;">
                <button id="btn-ficha" class="btn-pdf">Descargar Ficha (PDF)</button>
                <button id="btn-carnet" class="btn-pdf">Generar Carnet Veterinario (PDF)</button>
            </div>

        </div>

    </main>

    <footer class="main-footer">© 2025 Veterinaria Amor y lealtad</footer>

    <script>
      const profileIcon = document.querySelector(".nav-profile");
      const profileCard = document.querySelector(".profile");

      profileIcon.addEventListener("click", (e) => {
        e.stopPropagation();
        profileCard.classList.toggle("active");
      });

      window.addEventListener("click", (e) => {
        if (!profileCard.contains(e.target)) {
          profileCard.classList.remove("active");
        }
      });

      function generarPDF(nombreArchivo) {
        const elemento = document.getElementById('contenido-pdf');
        const opciones = {
            margin:       10,
            filename:     nombreArchivo,
            image:        { type: 'jpeg', quality: 0.98 },
            html2canvas:  { 
                scale: 2, 
                useCORS: true, 
                scrollY: 0, 
                windowWidth: document.documentElement.offsetWidth 
            },
            jsPDF:        { unit: 'mm', format: 'a4', orientation: 'portrait' },
            pagebreak:    { mode: ['avoid-all', 'css', 'legacy'] }
        };
        html2pdf().set(opciones).from(elemento).save();
      }

      document.getElementById('btn-ficha').addEventListener('click', (e) => {
        e.preventDefault();
        const nombre = document.getElementById("owner-name").innerText || "Dueño";
        generarPDF(`Ficha_Dueño_${nombre}.pdf`);
      });

      document.getElementById('btn-carnet').addEventListener('click', (e) => {
        e.preventDefault();
        const nombre = document.getElementById("owner-name").innerText || "Dueño";
        generarPDF(`Carnet_Dueño_${nombre}.pdf`);
      });
    </script>
    
</body>
</html>